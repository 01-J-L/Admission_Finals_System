{% extends 'admin_base.html' %}

{% set is_new = not member %}
{% set form_title = 'Add New Faculty/Staff Member' if is_new else 'Edit Member' %}

{% block title %}{{ form_title }}{% endblock %}

{% block breadcrumb %}
<a href="{{ url_for('auth.admin_manage_content') }}" class="text-gray-500 hover:text-primary">Manage Content</a>
<i class="ri-arrow-right-s-line mx-1 text-gray-400"></i>
<a href="{{ url_for('auth.admin_manage_faculty') }}" class="text-gray-500 hover:text-primary">Faculty</a>
<i class="ri-arrow-right-s-line mx-1 text-gray-400"></i>
<span>{{ 'Add' if is_new else 'Edit' }}</span>
{% endblock %}

{% block page_title %}{{ form_title }}{% endblock %}

{% block content %}
<form method="POST" enctype="multipart/form-data" class="space-y-6 bg-white p-8 rounded-lg shadow-md">
    
    <div>
        <label for="name" class="block text-sm font-medium leading-6 text-gray-900">Full Name</label>
        <input type="text" name="name" id="name" value="{{ member.name or '' }}" 
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm" required>
    </div>

    <div>
        <label for="role" class="block text-sm font-medium leading-6 text-gray-900">Role / Position</label>
        <input type="text" name="role" id="role" value="{{ member.role or '' }}" 
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm" required>
    </div>

    <div>
        <label for="category" class="block text-sm font-medium leading-6 text-gray-900">Category</label>
        <select id="category" name="category" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm" required>
            <option value="leadership" {% if member and member.category == 'leadership' %}selected{% endif %}>Leadership & Deans</option>
            <option value="faculty" {% if (member and member.category == 'faculty') or is_new %}selected{% endif %}>Faculty & Program Heads</option>
            <option value="support" {% if member and member.category == 'support' %}selected{% endif %}>Administrative & Support Staff</option>
        </select>
    </div>

    <div>
        <label for="image" class="block text-sm font-medium leading-6 text-gray-900">Photo</label>
        {% if member and member.image_filename %}
        <div class="mt-2 mb-2 flex items-center gap-x-3">
            <img src="{{ url_for('static', filename='images/uploads/' + member.image_filename) }}" class="h-16 w-16 object-cover rounded-full">
            <span class="text-xs text-gray-500">Current Photo. Upload a new one to replace it.</span>
        </div>
        {% endif %}
        <input type="file" name="image" id="image" accept="image/jpeg,image/png,image/webp"
               class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-primary hover:file:bg-violet-100">
    </div>

    <div class="flex items-center justify-end gap-x-6 pt-4 border-t border-gray-200">
        <a href="{{ url_for('auth.admin_manage_faculty') }}" class="text-sm font-semibold leading-6 text-gray-900">Cancel</a>
        <button type="submit" class="rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary/90">Save Member</button>
    </div>
</form>
{% endblock %}