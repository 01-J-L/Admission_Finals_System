<!-- --- START OF FILE templates/existing_or_not.html --- -->

{% extends 'base.html' %}

{% block title %}Student Admission{% endblock %}

{% block style %}
<style>
/* --- General Styles & Theme Variables (from index.html) --- */
:root {
    --primary: #1e40af;
    --secondary: #3b82f6;
    --text-dark: #111827;
    --text-medium: #4b5563;
    --text-light: #6b7280;
    --bg-light-gray: #f9fafb;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

html {
  scroll-behavior: smooth;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-light-gray);
    color: var(--text-medium);
}

/* --- Header Styles --- */
header {
    position: static;
    width: 100%;
    padding: 15px 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #162938;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.header-left { display: flex; align-items: center; }
.header-left .logo { font-size: 1.4em; color: #fff; margin-left: 15px; white-space: nowrap; }
.navigation a { position: relative; font-size: 1.1em; color: #fff; text-decoration: none; font-weight: 500; margin-left: 30px; }
.navigation a.no-underline { text-decoration: none; }
.menu-toggle { display: none; flex-direction: column; justify-content: space-around; width: 30px; height: 25px; background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1100; margin-left: 20px; }
.menu-toggle span { display: block; width: 100%; height: 3px; background-color: #fff; border-radius: 3px; transition: all 0.3s ease-in-out; }

/* --- Mobile Navigation --- */
@media (max-width: 992px) {
    header { padding: 10px 3%; }
    .header-left img { width: 60px; height: auto; }
    .header-left .logo { font-size: 0.9em; margin-left: 8px; }
    .menu-toggle span { background-color: #ffffff; }
    .navigation { position: absolute; top: 80px; right: 0; width: 250px; background-color: #162938; box-shadow: 0 8px 16px rgba(0,0,0,0.15); flex-direction: column; align-items: stretch; display: none; z-index: 1050; border-top: 1px solid #2a3f54; max-height: calc(100vh - 80px); overflow-y: auto; }
    .navigation.active { display: flex; }
    .navigation a { display: block; padding: 12px 20px; margin-left: 0; text-align: left; color: #f0f0f0; border-bottom: 1px solid #2a3f54; }
    .navigation a:last-child { border-bottom: none; }
    .navigation a:hover { background-color: #22333f; }
    .navigation a .btnLogin-popup { width: calc(100% - 10px); margin: 5px; padding: 10px 15px; font-size: 1em; text-align: center; display: block; height: auto; box-sizing: border-box; }
    .menu-toggle { display: flex; }
    .menu-toggle.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
    .menu-toggle.active span:nth-child(2) { opacity: 0; }
    .menu-toggle.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }
}
@media (max-width: 480px) {
    .header-left .logo { font-size: 0.8em; }
}

/* --- Main Content Area --- */
.main-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    min-height: 80vh;
}
.main-content .title-group {
    text-align: center;
    margin-bottom: 3rem;
    max-width: 600px;
}
.main-content h1 {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--text-dark);
    margin-bottom: 1rem;
}
.main-content p.subtitle {
    font-size: 1.125rem;
    color: var(--text-medium);
    line-height: 1.7;
}

/* --- Choice Cards (UPDATED to Flexbox for Centering) --- */
.choice-grid {
    display: flex;              /* Changed from Grid to Flex */
    flex-wrap: wrap;            /* Allow wrapping on mobile */
    justify-content: center;    /* Center content horizontally */
    gap: 2rem;
    max-width: 1200px;
    width: 100%;
}

.choice-card {
    background-color: #fff;
    border-radius: var(--radius-xl);
    padding: 2rem;
    box-shadow: var(--shadow-lg);
    border: 1px solid #e5e7eb;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    
    /* Flex sizing logic */
    flex: 1 1 300px;      /* Grow: 1, Shrink: 1, Basis: 300px (min width before wrapping) */
    max-width: 380px;     /* Max width so they don't stretch too wide when few are present */
    width: 100%;
}

.choice-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
}
.choice-card .icon-wrapper {
    width: 64px; height: 64px;
    background-color: rgba(30, 64, 175, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
}
.choice-card .icon-wrapper i {
    font-size: 1.75rem;
    color: var(--primary);
}
.choice-card h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
}
.choice-card p {
    color: var(--text-medium);
    margin-bottom: 1.5rem;
    flex-grow: 1;
}

/* --- Button Styles --- */
.btn {
    display: inline-block;
    padding: 10px 24px;
    border-radius: 8px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    white-space: nowrap;
    border: 2px solid transparent;
}
.btn-primary {
    background-color: var(--primary);
    color: #fff;
}
.btn-primary:hover {
    background-color: var(--secondary);
}
.btn-outline {
    border-color: var(--primary);
    color: var(--primary);
}
.btn-outline:hover {
    background-color: var(--primary);
    color: #fff;
}
.btn-outline-secondary {
    border-color: var(--secondary);
    color: var(--secondary);
}
.btn-outline-secondary:hover {
    background-color: var(--secondary);
    color: #fff;
}

/* --- Modal Styles --- */
#procedureModal { z-index: 2000; }
#procedureModal .modal-content {
    background-color: #fff;
    padding: 2rem;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    width: 100%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
}
#procedureModal h2 {
    color: var(--primary);
    font-weight: 800;
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
}
#procedureModal .text-content {
    text-align: left;
    space-y: 1rem;
    color: var(--text-medium);
}
#procedureModal .text-content p { margin-bottom: 1rem; }
#procedureModal strong { color: var(--text-dark); font-weight: 600; }

/* --- Footer (Copied from index.html) --- */
.footer { position: relative; display: flex; flex-direction: column; align-items: center; padding: 2rem 1rem; text-align: center; color: white; overflow: hidden; background-color: #111827; }
.footer::before { content: ""; position: absolute; inset: 0; background: url("{{ url_for('static', filename='images/pgpcbuild.jpg') }}") center/cover no-repeat; z-index: 0; opacity: 0.1; }
.footer::after { content: ""; position: absolute; inset: 0; background: rgba(22, 41, 56, 0.442); z-index: 1; }
.footer * { position: relative; z-index: 2; }
.footer-logo { width: 100px; height: 100px; margin-bottom: 1rem; }
.footer-title { font-size: 1.5rem; font-weight: bold; }
.footer-subtitle { font-size: 1.25rem; font-weight: bold; margin-top: 0.5rem; }
.footer-connect { margin-top: 1rem; font-size: 1rem; }
.footer-socials { display: flex; gap: 1rem; margin-top: 0.5rem; font-size: 1.25rem; }
.footer-socials a { color: white; text-decoration: none; transition: color 0.3s ease; }
.footer-socials a:hover { color: #0987d0; }
.footer-divider { border-top: 1px solid white; width: 25%; margin: 2rem 0; }
.footer-bottom { font-size: 0.875rem; line-height: 1.6; max-width: 700px; }
.footer-bottom p { margin-bottom: 0.5rem; }
.footer-bottom a { color: white; text-decoration: none; }
.footer-bottom a:hover { text-decoration: underline; }

</style>
{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="icon" href="{{ url_for('static', filename='logopgpc.png') }}" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
    <title>PGPC - Student Admission</title>
{% endblock%}

{% block body %}

<header>
    <div class="header-left">
        <a href="{{ url_for('views.home') }}"><img src="{{ url_for('static', filename='logopgpc.png') }}" alt="Padre Garcia Polytechnic College Logo" width="80" height="auto" ></a>
        <h2 class="logo">Padre Garcia Polytechnic College</h2>
    </div>

    <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="main-navigation">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <nav class="navigation" id="main-navigation">
        <a href="{{ url_for('views.home') }}">Home</a>
        <a href="{{ url_for('views.about') }}">About</a>
        <a href="{{ url_for('views.home') }}#programs">Programs</a>
        <a href="{{ url_for('views.home') }}#news">News</a>
        <a href="{{ url_for('views.contact_page') }}">Contact</a>
        {% if student_logged_in %}
            <a href="{{ url_for('views.application_status_page') }}">
                <button class="btnLogin-popup">My Application</button>
            </a>
            <a href="{{ url_for('auth.logout') }}">
                 <button class="btnLogin-popup" style="background-color: #d9534f;">Logout</button>
            </a>
        {% else %}
             <!-- NEW: Check if registration is open -->
             
             <a href="{{ url_for('views.existing_or_not') }}" class="no-underline">
                 <button class="btnLogin-popup">Apply now</button>
             </a>
             
        {% endif %}
    </nav>
</header>

<main class="main-content">
    <div class="title-group">
        <h1>Student Admission Portal</h1>
        <p class="subtitle">
            Your first step towards academic excellence begins here. Choose an option below to get started.
        </p>
    </div>
    <div class="choice-grid">
        <!-- View Admission Procedure Card -->
        <div class="choice-card">
            <div class="icon-wrapper">
                <i class="ri-file-list-line icon"></i>
            </div>
            <h3>View Admission Procedure</h3>
            <p>
                Learn about our admission requirements, process, and important deadlines.
            </p>
            <button id="viewProcedure" class="btn btn-outline">
                View Procedure
            </button>
        </div>

        <!-- Create Account Card (Updated Logic) -->
        {% if global_content.enable_account_creation == 'true' %}
        <div class="choice-card">
            <div class="icon-wrapper">
                <i class="ri-user-add-line icon"></i>
            </div>
            <h3>New Applicant?</h3>
            <p>
                Create an account to start your application journey with PGPC.
            </p>
            <a href="{{ url_for('auth.create_student_account_page') }}" class="btn btn-primary">
                Create Account
            </a>
        </div>
        {% endif %}

        <!-- Student Login Card -->
        <div class="choice-card">
            <div class="icon-wrapper">
                <i class="ri-login-box-line icon"></i>
            </div>
            <h3>Already Registered?</h3>
            <p>
                Log in to continue your application or check your status.
            </p>
            <a href="{{ url_for('auth.student_login_page') }}" class="btn btn-outline-secondary">
                Student Login
            </a>
        </div>
    </div>

    <!-- Need Help Section -->
<div class="mt-12 w-full max-w-2xl mx-auto px-4">
    <div class="bg-white p-4 sm:p-6 rounded-2xl border border-gray-200 shadow-sm flex flex-col sm:flex-row items-center gap-4 text-center sm:text-left transition-all hover:shadow-md">
        <!-- Icon Circle -->
        <div class="w-12 h-12 bg-blue-50 text-primary rounded-full flex items-center justify-center shrink-0">
            <i class="ri-customer-service-2-line text-2xl"></i>
        </div>
        
        <!-- Text Content -->
        <div class="flex-1 min-w-0">
            <h4 class="text-gray-900 font-bold mb-1">Need assistance?</h4>
            <p class="text-sm sm:text-base text-gray-600 leading-relaxed">
                Our admissions team is here to guide you. Reach us at: 
                <!-- DYNAMIC EMAIL FROM ADMIN PANEL -->
                <a href="mailto:{{ global_content.contact_email or 'polytechniccollegepadregarcia@gmail.com' }}" 
                   class="text-primary font-semibold hover:underline block lg:inline-block break-all sm:break-normal">
                    {{ global_content.contact_email or 'polytechniccollegepadregarcia@gmail.com' }}
                </a>
            </p>
        </div>
    </div>
</div>
</main>

<!-- Procedure Modal -->
<div id="procedureModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4">
  <div class="modal-content">
      <button id="closeProcedure" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 text-3xl z-10">&times;</button>
      <h2>Admission Procedure</h2>
      <div class="text-content">
          <p><strong>Step 1: Create Account/Login</strong><br> New applicants must create a student account. Existing applicants can log in.</p>
          <p><strong>Step 2: Fill Application Form</strong><br> Complete all required sections of the online application form accurately.</p>
          <p><strong>Step 3: Upload Documents</strong><br> Upload scanned copies of necessary documents, including a recent 2x2 photo.</p>
          <p><strong>Step 4: Submit Application</strong><br> Review your application thoroughly before final submission.</p>
          <p><strong>Step 5: Check Status</strong><br> You will be notified via email about your application status. You can also check the "My Application" section on the portal.</p>
          <p><strong>Important Dates:</strong><br> - Application Start: To be announced<br> - Application Deadline: To be announced<br> - Entrance Exam (if applicable): To be announced</p>
          <p>For inquiries, please contact the admissions office.</p>
      </div>
  </div>
</div>

<footer class="footer">
    <!-- Dynamic Logo -->
    <img src="{{ url_for('static', filename='images/uploads/' + global_content.footer_logo_image) if global_content.footer_logo_image else url_for('static', filename='logopgpc.png') }}" 
         alt="Padre Garcia Polytechnic College logo" class="footer-logo" />
    
    <!-- Dynamic Title & Slogan -->
    <h1 class="footer-title">{{ global_content.footer_title or 'Padre Garcia Polytechnic College' }}</h1>
    <h2 class="footer-subtitle">{{ global_content.footer_subtitle or 'THE FUTURE BEGINS HERE.' }}</h2>
    
    <!-- Dynamic Connect Text & Socials -->
    <p class="footer-connect">{{ global_content.footer_connect_text or 'Connect with us' }}</p>
    <div class="footer-socials">
        {% if global_socials %}
            {% for link in global_socials %}
                <a href="{{ link.url }}" target="_blank" rel="noopener noreferrer" aria-label="{{ link.platform_name }}">
                    <i class="{{ link.icon_class }}"></i>
                </a>
            {% endfor %}
        {% else %}
            <!-- Fallback for old static link if no dynamic links exist -->
            {% if global_content.footer_facebook_link %}
                <a href="{{ global_content.footer_facebook_link }}" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            {% endif %}
        {% endif %}
    </div>

    <div class="footer-divider"></div>
    
    <!-- Dynamic Links & Contact Info -->
    <div class="footer-bottom">
      <p>
          <a href="{{ url_for('views.about') }}">About</a> | 
          <a href="{{ url_for('views.contact_page') }}">Contact us</a> | 
          <a href="{{ url_for('views.home') }}#programs">Programs</a> | 
          <a href="{{ url_for('views.home') }}">Admission</a> | 
          <a href="https://maps.app.goo.gl/od3hUBTfTZ1uNNvn7" target="_blank" rel="noopener noreferrer">{{ global_content.contact_address }}</a> | 
          <a href="tel:{{ global_content.contact_phone }}">{{ global_content.contact_phone }}</a>
      </p>
      <p>Â© {{ current_year if current_year else '2025' }}. All Rights Reserved {{ global_content.footer_title }} | <a href="https://www.padregarcia.gov.ph/home" target="_blank" rel="noopener noreferrer">Padre Garcia PH</a></p>
    </div>
</footer>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      const menuToggle = document.querySelector('.menu-toggle');
      const navigation = document.getElementById('main-navigation');

      if (menuToggle && navigation) {
          menuToggle.addEventListener('click', function() {
              navigation.classList.toggle('active');
              menuToggle.classList.toggle('active');
              const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
              menuToggle.setAttribute('aria-expanded', !isExpanded);
          });
      }

      const viewProcedureBtn = document.getElementById("viewProcedure");
      const procedureModal = document.getElementById("procedureModal");
      const closeProcedureBtn = document.getElementById("closeProcedure");

      if (viewProcedureBtn && procedureModal && closeProcedureBtn) {
        viewProcedureBtn.addEventListener("click", function () {
          procedureModal.classList.remove("hidden");
          procedureModal.classList.add("flex");
          document.body.style.overflow = "hidden";
        });

        function closeModal() {
          procedureModal.classList.add("hidden");
          procedureModal.classList.remove("flex");
          document.body.style.overflow = "";
        }

        closeProcedureBtn.addEventListener("click", closeModal);

        procedureModal.addEventListener("click", function (e) {
          if (e.target === procedureModal) {
            closeModal();
          }
        });
      }
    });
</script>
{% endblock %}