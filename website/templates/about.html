{% extends 'base.html' %}

{% block style %}
<style>
/* --- General Styles & Theme Variables from index.html --- */
:root {
    --primary: #1e40af; 
    --secondary: #3b82f6;
    --text-dark: #111827;
    --text-medium: #4b5563;
    --text-light: #6b7280;
    --bg-light-gray: #f9fafb;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

html {
  scroll-behavior: smooth;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: #fff;
    color: var(--text-medium);
}


/* Header Styles (Consistent with index.html) */
header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    padding: 15px 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    transition: background-color 0.3s ease;
}

.header-left { display: flex; align-items: center; }
.header-left .logo { font-size: 1.4em; color: #fff; margin-left: 15px; white-space: nowrap; transition: color 0.3s ease; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
.header-left img { filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3)); }
.navigation a { position: relative; font-size: 1.1em; color: #fff; text-decoration: none; font-weight: 500; margin-left: 30px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
.navigation a.no-underline { text-decoration: none; }
.menu-toggle { display: none; flex-direction: column; justify-content: space-around; width: 30px; height: 25px; background: transparent; border: none; cursor: pointer; padding: 0; z-index: 1100; margin-left: 20px; }
.menu-toggle span { display: block; width: 100%; height: 3px; background-color: #fff; border-radius: 3px; transition: all 0.3s ease-in-out; box-shadow: 0 0 2px rgba(0,0,0,0.5); }

/* Update these in your style block in about.html */
.about-hero-banner {
    position: relative;
    height: 85vh;
    min-height: 650px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    overflow: hidden; /* Clips the video to the container */
    background-color: #000; /* Fallback if media fails */
}

/* This replaces background-image */
.hero-video-bg, .hero-image-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; /* Makes media fill the area like background-size: cover */
    z-index: 0;
}

.about-hero-banner::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5); /* Dark overlay */
    z-index: 1; /* Above video, below text */
}

.hero-content {
    position: relative;
    z-index: 2; /* Ensures text is on top */
}

/* --- General Section Styling (from index.html) --- */
.section-container {
    padding: 80px 20px;
    position: relative;
    overflow: hidden;
    z-index: 1;
}
.section-title-wrapper {
    text-align: center;
    margin-bottom: 4rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}
.section-title {
    font-size: 2.5rem;
    color: var(--text-dark);
    margin-bottom: 1rem;
    font-weight: 800;
}
.section-subtitle {
    font-size: 1.125rem;
    color: var(--text-medium);
    line-height: 1.7;
}
.section-container::before,
.section-container::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    filter: blur(100px);
    z-index: -1;
    opacity: 0.08;
    pointer-events: none;
}

/* --- Shared Typography (Ensures text looks the same in both modes) --- */
.hero-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 40px 20px;
}
.hero-content h1 {
    font-size: 4rem; /* Desktop Size */
    font-weight: 800;
    margin-bottom: 0.5em;
    text-transform: none;
}
.hero-content p {
    font-size: 1.3em;
    line-height: 1.6;
    max-width: 600px;
    margin: 0 auto;
}

/* --- Video Mode Container --- */
.video-player-wrapper {
    width: 100%;
    background-color: #000;
    /* This margin ensures the video starts AFTER your absolute header */
    margin-top: 110px; 
    line-height: 0;
}

.video-player-wrapper video {
    width: 100%;
    max-height: 90vh;
    display: block;
}

/* --- Image Mode (Original Layout) --- */
.about-hero-banner {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    height: 85vh;
    min-height: 650px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    padding: 20px;
    padding-top: 120px; /* Original padding for text placement */
    box-sizing: border-box;
    position: relative;
}

/* Re-adding the background image logic via a class for image mode */
.hero-image-bg {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
}

.about-hero-banner::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.55);
    z-index: 1;
}

.hero-content {
    position: relative;
    z-index: 2;
}

/* Keep your original typography */
.hero-content h1 {
    font-size: 4rem;
    font-weight: 800;
    margin-bottom: 0.5em;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
}

.hero-content p {
    font-size: 1.3em;
    text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
    max-width: 600px;
    margin: 0 auto;
}

@media (max-width: 992px) {
    .video-player-wrapper { margin-top: 50px; } /* Smaller header on mobile */
    .hero-content h1 { font-size: 2.8em; }
}
/* --- About Section Styles (Updated Theme) --- */
.about-section {
  background-color: var(--bg-light-gray);
  color: var(--text-medium);
  z-index: 5;
}
.about-section::before {
    width: 400px; height: 400px; background: radial-gradient(circle, var(--secondary) 0%, var(--primary) 100%); top: -150px; left: -150px;
}

.about-container { display: flex; flex-direction: column; gap: 30px; max-width: 1200px; margin: 0 auto; }
@media (min-width: 768px) { .about-container { flex-direction: row; } }

.about-sidebar { flex: 1; max-width: 300px; }
.box-title {
  background-color: var(--primary);
  color: white;
  padding: 16px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 16px;
  border-radius: var(--radius-md);
}
.image-box {
  background: white;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}
.image-box img { width: 100%; height: auto; display: block; border-radius: var(--radius-md); }

.about-content { flex: 3; padding-left: 0; }
@media (min-width: 768px) { .about-content { padding-left: 30px; } }
.about-content .heading { font-size: 2rem; color: var(--text-dark); margin-bottom: 1rem; margin-top: 1.5rem; border-bottom: 2px solid var(--primary); padding-bottom: 0.5rem; }

.about-content > h1.heading:first-of-type {
    font-size: 1.7em; font-weight: 600; font-style: italic; color: var(--primary);
    text-align: center; padding: 1.5rem; margin-top: 0; margin-bottom: 3rem;
    background-color: #fff; border: 1px solid #e5e7eb; border-left: 5px solid var(--primary);
    border-radius: var(--radius-lg); box-shadow: var(--shadow-md); border-bottom: none;
}
.about-content > h2.heading { font-size: 2.1em; color: var(--text-dark); margin-top: 2rem; border-bottom: 2px solid var(--primary); padding-bottom: 0.6rem; margin-bottom: 1.8rem; }
.about-content p { margin-bottom: 2.5rem; line-height: 1.75; font-size: 1.05em; color: var(--text-medium); }

.objectives { list-style-type: none; padding-left: 0; margin-bottom: 2.5rem; }
.objectives li { margin-bottom: 1.2rem; padding-left: 35px; position: relative; font-size: 1.05em; line-height: 1.7; color: var(--text-medium); }
.objectives li::before {
    content: "✔"; position: absolute; left: 0; top: 50%;
    transform: translateY(-50%); color: var(--primary); font-weight: bold; font-size: 1.2em;
}

/* --- Meet People Section Styles (Updated Theme) --- */
.meet-people-section { background-color: #ffffff; z-index: 5; }
.meet-people-section::after { width: 500px; height: 500px; background: radial-gradient(circle, var(--secondary) 0%, var(--primary) 100%); top: 50%; right: -250px; transform: translateY(-50%); }

.meet-people-container { max-width: 1100px; margin: 0 auto; }
.meet-people-top-row { display: flex; flex-wrap: wrap; align-items: center; gap: 2rem; margin-bottom: 3rem; }
.meet-people-text { flex: 1 1 55%; min-width: 300px; }
.meet-people-text h2 { font-size: 2.5rem; color: var(--text-dark); margin-bottom: 1rem; font-weight: 800; }
.meet-people-text p { margin-bottom: 1rem; line-height: 1.6; font-size: 1rem; color: var(--text-medium); }

.meet-people-image-large { flex: 1 1 40%; min-width: 300px; }
.meet-people-image-large img { width: 100%; height: auto; display: block; border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); }

.meet-people-bottom-row { margin-top: 3rem; padding: 1rem 0; }
.single-featured-person {
    display: flex; flex-direction: row; align-items: flex-start; gap: 2.5rem;
    max-width: 950px; margin: 0 auto; padding: 2.5rem; background-color: #ffffff;
    border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); border: 1px solid #e2e8f0;
    overflow: hidden;
}
.single-featured-person .person-image-container { flex: 0 0 35%; max-width: 320px; min-width: 200px; }
.single-featured-person .person-image-container img { width: 100%; height: auto; display: block; border-radius: var(--radius-lg); object-fit: cover; }
.single-featured-person .person-details-container { flex: 1 1 60%; padding-top: 0.5rem; }
.single-featured-person .person-name { font-size: 1.8em; font-weight: 700; color: var(--text-dark); margin-top: 0; margin-bottom: 0.5rem; }
.single-featured-person .person-role { font-size: 1.15em; color: var(--primary); font-weight: 600; margin-bottom: 1.25rem; text-transform: uppercase; letter-spacing: 0.5px; }
.single-featured-person .person-description { font-size: 1rem; line-height: 1.75; color: var(--text-medium); margin-bottom: 0; }

@media (max-width: 768px) {
  .meet-people-top-row { flex-direction: column; }
  .meet-people-text { flex-basis: 100%; margin-bottom: 2rem; text-align: center; }
  .meet-people-text h2 { font-size: 2.2em; }
  .meet-people-image-large { flex-basis: 100%; }
  .single-featured-person { flex-direction: column; align-items: center; text-align: center; padding: 1.5rem; gap: 1.5rem; }
  .single-featured-person .person-image-container { flex-basis: auto; width: 60%; max-width: 240px; margin: 0 auto; }
  .single-featured-person .person-details-container { flex-basis: auto; width: 100%; padding-top: 0; }
  .single-featured-person .person-name, .single-featured-person .person-role, .single-featured-person .person-description { text-align: center; }
  .single-featured-person .person-name { font-size: 1.6em; }
}

/* --- Meet Our Staff Section Styles (Updated Theme) --- */
.meet-our-staff-section { background-color: var(--bg-light-gray); z-index: 5; }
.meet-our-staff-section::before { width: 350px; height: 350px; background: radial-gradient(circle, var(--primary) 0%, var(--secondary) 100%); bottom: -100px; left: -120px; }

.meet-our-staff-container { max-width: 1200px; margin: 0 auto; }
.staff-category { margin-bottom: 4rem; }
.staff-category:last-child { margin-bottom: 0; }

.staff-header-container { display: flex; align-items: center; justify-content: center; margin-bottom: 2rem; }
.staff-header-titles { flex-grow: 0; text-align: center; }

.staff-section-subtitle { font-size: 1em; color: var(--text-light); margin-bottom: 0.45rem; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 500; }
.staff-section-main-title { font-size: 2.8em; font-weight: 800; color: var(--text-dark); margin-bottom: 0; letter-spacing: -0.5px; }

.staff-carousel-content-wrapper { position: relative; }
.staff-grid-wrapper { overflow: hidden; width: 100%; }
.staff-grid { display: flex; flex-wrap: nowrap; gap: 25px; transition: transform 0.5s ease-in-out; padding-bottom: 10px; }

.staff-member-card {
    flex-shrink: 0; width: 280px; box-sizing: border-box;
    background-color: #fff; border-radius: var(--radius-xl); padding: 25px; text-align: center;
    box-shadow: var(--shadow-md); transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer; border: 1px solid #e5e7eb;
}
.staff-member-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-lg); }
.staff-member-card img {
    width: 120px; height: 120px; border-radius: 50%; object-fit: cover;
    margin: 0 auto 20px auto; display: block; border: 4px solid #ffffff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.staff-member-name { font-size: 1.25em; font-weight: 700; color: var(--text-dark); margin-top: 0; margin-bottom: 0.5rem; }
.staff-member-role { font-size: 0.95em; color: var(--primary); font-weight: 500; margin-bottom: 0; }

.staff-nav-arrow {
    position: absolute; top: 50%; transform: translateY(-50%); z-index: 10;
    background-color: #fff; border: 1px solid #ced4da; border-radius: 50%;
    width: 44px; height: 44px; font-size: 1.5em; color: var(--text-dark);
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all 0.2s ease; box-shadow: var(--shadow-md);
}
.staff-nav-arrow:hover { background-color: #e9ecef; border-color: #adb5bd; box-shadow: var(--shadow-lg); }
.staff-nav-arrow:disabled { opacity: 0.5; cursor: not-allowed; background-color: #f8f9fa; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
.staff-nav-arrow.prev { left: -50px; }
.staff-nav-arrow.next { right: -50px; }

@media (max-width: 992px) {
    .staff-nav-arrow.prev { left: 10px; }
    .staff-nav-arrow.next { right: 10px; }
}
@media (max-width: 768px) {
    .staff-carousel-content-wrapper { padding-top: 55px; }
    .staff-nav-arrow { top: 8px; transform: translateY(0); }
    .staff-nav-arrow.prev { left: 5px; }
    .staff-nav-arrow.next { right: 5px; }
}

/* --- Location/Map Section Styles (MODIFIED to match contact.html style) --- */
.location-section {
  background-color: #ffffff; text-align: center; z-index: 5;
}
.location-container { max-width: 900px; margin: 0 auto; }
.location-section .heading { font-size: 2.5rem; color: var(--text-dark); font-weight: 800; margin-bottom: 1rem; margin-top: 0; border-bottom: none; }

.map-container {
    margin-top: 2.5rem;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: 1px solid #e5e7eb;
}
.map-container iframe {
    width: 100%;
    height: 450px; /* Increased height for better view in a standalone section */
    border: 0;
}

/* --- Go Top Button Styles (from index.html) --- */
.go-top-btn {
  position: fixed; bottom: 24px; right: 24px;
  width: 48px; height: 48px; background-color: var(--primary);
  color: white; border-radius: 50%; border: none; cursor: pointer;
  display: none; justify-content: center; align-items: center;
  z-index: 1000; box-shadow: var(--shadow-lg); transition: all 0.3s ease;
}
.go-top-btn:hover { background-color: var(--secondary); transform: scale(1.1); }
.go-top-btn i { font-size: 1.5rem; }

/* --- Reveal on Scroll Animation --- */
.reveal-on-scroll {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.8s cubic-bezier(0.5, 0, 0, 1), transform 0.8s cubic-bezier(0.5, 0, 0, 1);
    will-change: opacity, transform;
}
.reveal-on-scroll.is-visible { opacity: 1; transform: translateY(0); }


/* --- Footer Styles (from index.html) --- */
.footer {
  position: relative; display: flex; flex-direction: column;
  align-items: center; padding: 2rem 1rem; text-align: center;
  color: white; overflow: hidden; z-index: 5;
}
.footer::before {
  content: ""; position: absolute; inset: 0;
  background: url("{{ url_for('static', filename='images/pgpcbuild.jpg') }}") center/cover no-repeat fixed;
  z-index: 0; opacity: 0.3;
}
.footer::after {
  content: ""; position: absolute; inset: 0;
  background: rgba(22, 41, 56, 0.442); z-index: 1;
}
.footer * { position: relative; z-index: 2; }
.footer-logo { width: 100px; height: 100px; margin-bottom: 1rem; }
.footer-title { font-size: 1.5rem; font-weight: bold; }
.footer-subtitle { font-size: 1.25rem; font-weight: bold; margin-top: 0.5rem; }
.footer-connect { margin-top: 1rem; font-size: 1rem; }
.footer-socials { display: flex; gap: 1rem; margin-top: 0.5rem; font-size: 1.25rem; }
.footer-socials a { color: white; text-decoration: none; transition: color 0.3s ease; }
.footer-socials a:hover { color: #0987d0; }
.footer-divider { border-top: 1px solid white; width: 25%; margin: 2rem 0; }
.footer-bottom { font-size: 0.875rem; line-height: 1.6; max-width: 700px; }
.footer-bottom p { margin-bottom: 0.5rem; }
.footer-bottom a { color: white; text-decoration: none; }
.footer-bottom a:hover { text-decoration: underline; }

/* --- About Section (Vision/Mission) --- */
.section-container { padding: clamp(40px, 8vw, 100px) 20px; }
.about-container { display: flex; flex-direction: column; gap: 40px; max-width: 1200px; margin: 0 auto; }
@media (min-width: 1024px) { .about-container { flex-direction: row; align-items: flex-start; } }

.about-sidebar { flex: 1; width: 100%; max-width: 400px; margin: 0 auto; }
.box-title { background-color: var(--primary); color: white; padding: 16px; font-weight: bold; text-align: center; border-radius: var(--radius-md); margin-bottom: 15px; }
.image-box { background: white; padding: 10px; border: 1px solid #e0e0e0; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }
.image-box img { width: 100%; border-radius: var(--radius-md); }

.about-content { flex: 2; }
.about-content .heading { font-size: clamp(1.5rem, 4vw, 2.1rem); color: var(--text-dark); margin: 2rem 0 1rem; border-bottom: 3px solid var(--primary); display: inline-block; padding-bottom: 5px; }
.about-content p { line-height: 1.8; font-size: 1.05rem; margin-bottom: 1.5rem; }

/* Mobile Navigation Styles & Adjustments */
@media (max-width: 992px) {
    header { padding: 10px 3%; background-color: #162938; } 
    .header-left img { width: 60px; height: auto; filter: none; }
    .header-left .logo { font-size: 0.9em; margin-left: 8px; color: #fff; text-shadow: none; }
    .menu-toggle span { background-color: #ffffff; box-shadow: none; }
    .navigation { position: absolute; top: 100%; right: 0; width: 250px; background-color: #162938; box-shadow: 0 8px 16px rgba(0,0,0,0.15); flex-direction: column; align-items: stretch; display: none; z-index: 1050; border-top: 1px solid #2a3f54; max-height: calc(100vh - 60px); overflow-y: auto; }
    .navigation.active { display: flex; }
    .navigation a { display: block; padding: 12px 20px; margin-left: 0; text-align: left; color: #f0f0f0; border-bottom: 1px solid #2a3f54; text-decoration: none; text-shadow: none; }
    .navigation a:last-child { border-bottom: none; }
    .navigation a:hover { background-color: #22333f; }
    .navigation a .btnLogin-popup { width: calc(100% - 10px); margin: 5px; padding: 10px 15px; font-size: 1em; text-align: center; display: block; height: auto; box-sizing: border-box; }
    .menu-toggle { display: flex; }
    .menu-toggle.active span:nth-child(1) { transform: translateY(9px) rotate(45deg); }
    .menu-toggle.active span:nth-child(2) { opacity: 0; }
    .menu-toggle.active span:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }
    .about-hero-banner { padding-top: 90px; height: 65vh; min-height: 380px; }
    .about-hero-banner .hero-content h1 { font-size: 2.8em; }
}
@media (max-width: 768px) {
    .about-hero-banner .hero-content h1 { font-size: 2.2em; }
    .section-container { padding: 60px 15px; }
    .section-title { font-size: 2.2rem; }
    .location-section .heading { font-size: 2.2rem; }
}
@media (max-width: 480px) {
    .about-hero-banner .hero-content h1 { font-size: 1.8em; }
    .section-title, .location-section .heading, .meet-people-text h2 { font-size: 2rem; }
}

/* --- SLOGAN TEXT (RESPONSIVE FIX) --- */
.slogan-title {
    font-size: 1.25rem; /* Mobile Size */
    line-height: 1.3;
    text-align: center;
}

@media (min-width: 1024px) {
    .slogan-title {
        font-size: 2rem; /* Big Desktop Size */
        margin-bottom: 2rem !important;
    }
}

/* --- Staff Member Modal Styles (Updated Theme) --- */
.staff-modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.8); display: none; align-items: center;
    justify-content: center; z-index: 2000; padding: 15px; box-sizing: border-box; overflow-y: auto;
}
.staff-modal.active { display: flex; }
.staff-modal-content {
    background-color: #fff; padding: 30px; border-radius: var(--radius-lg);
    box-shadow: 0 8px 25px rgba(0,0,0,0.4); position: relative; max-width: 400px;
    width: 90%; text-align: center; animation: fadeInModal 0.3s ease-out;
    border: 5px solid var(--primary);
}
@keyframes fadeInModal {
    from { opacity: 0; transform: translateY(-20px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
.staff-modal-close {
    position: absolute; top: -18px; right: -18px; background-color: #fff;
    border: 2px solid var(--primary); border-radius: 50%; width: 38px;
    height: 38px; font-size: 1.8em; color: var(--primary); cursor: pointer;
    line-height: 32px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 10;
}
.staff-modal-close:hover { background-color: #f0f0f0; color: #0f1f2b; }
.staff-modal #modalStaffImage {
    width: 100%; max-width: 250px; height: auto; border-radius: var(--radius-md);
    object-fit: cover; margin-bottom: 20px; border: 2px solid #eee; display: block;
    margin-left: auto; margin-right: auto;
}
.staff-modal #modalStaffName {
    font-size: 1.9em; font-weight: bold; color: var(--text-dark);
    margin-top: 0; margin-bottom: 0.75rem; line-height: 1.2;
}
.staff-modal #modalStaffRole {
    display: inline-block; background-color: var(--primary); color: #fff; font-size: 1em;
    font-weight: bold; padding: 8px 20px; border-radius: 20px;
    margin-top: 0; margin-bottom: 0; text-transform: uppercase;
}

/* --- Staff Category Titles (RESPONSIVE FIX) --- */
.staff-section-main-title {
    /* Adaptive sizing for titles */
    font-size: 2.8rem; /* Desktop default */
    font-weight: 800;
    color: var(--text-dark);
    text-align: center;
    letter-spacing: -0.5px;
    margin-bottom: 0;
}

@media (max-width: 1024px) {
    .staff-section-main-title { font-size: 2.2rem; }
}

@media (max-width: 768px) {
    .staff-section-main-title { font-size: 1.8rem; }
}

@media (max-width: 480px) {
    .staff-section-main-title { font-size: 1.5rem; }
}

/* --- Staff Carousel & Cards --- */
.staff-carousel-content-wrapper { position: relative; width: 100%; padding: 0 10px; }
.staff-grid-wrapper { overflow: hidden; }
.staff-grid { display: flex; gap: 20px; transition: transform 0.5s ease; padding: 20px 0; }

.staff-member-card {
    flex: 0 0 280px; background: white; padding: 30px 20px; border-radius: var(--radius-xl);
    text-align: center; border: 1px solid #e5e7eb; box-shadow: var(--shadow-md);
}
@media (max-width: 480px) {
    .staff-member-card { flex: 0 0 85vw; }
}

</style>
{% endblock %}


{% block head %}
    {{ super() }}
    <link rel="icon" href="{{ url_for('static', filename='logopgpc.png') }}" type="image/x-icon">
    <!-- Fonts and Icons (Consistent with index.html) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
    <title>About Us - Padre Garcia Polytechnic College</title>
{% endblock%}


{% block body %}

<header>
    <div class="header-left">
        <a href="{{ url_for('views.home') }}"><img src="{{ url_for('static', filename='logopgpc.png') }}" alt="Padre Garcia Polytechnic College Logo" width="80" height="auto" ></a>
        <h2 class="logo">Padre Garcia Polytechnic College</h2>
    </div>

    <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="main-navigation">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <nav class="navigation" id="main-navigation">
        <a href="{{ url_for('views.home') }}">Home</a>
        <a href="{{ url_for('views.about') }}">About</a>
        <a href="{{ url_for('views.home') }}#programs">Programs</a>
        <a href="{{ url_for('views.home') }}#news">News</a>
        <a href="{{ url_for('views.contact_page') }}">Contact</a>
        {% if student_logged_in %}
            <a href="{{ url_for('views.application_status_page') }}">
                <button class="btnLogin-popup">My Application</button>
            </a>
            <a href="{{ url_for('auth.logout') }}">
                 <button class="btnLogin-popup" style="background-color: #d9534f;">Logout</button>
            </a>
        {% else %}
            <a href="{{ url_for('views.existing_or_not') }}" class="no-underline">
              <button class="btnLogin-popup">Apply now</button>
            </a>
        {% endif %}
    </nav>
</header>


{% if content.about_hero_type == 'video' and content.about_hero_bg_file %}
    
    <!-- VIDEO MODE: Video Player only (Below the header) -->
    <div class="video-player-wrapper">
        <video controls class="shadow-xl">
            <source src="{{ url_for('static', filename='images/uploads/' + content.about_hero_bg_file) }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

{% else %}

    <!-- IMAGE MODE: Retains Original Hero Design with Text Overlay -->
    <section class="about-hero-banner">
        {% if content.about_hero_bg_file %}
            <img src="{{ url_for('static', filename='images/uploads/' + content.about_hero_bg_file) }}" class="hero-image-bg" alt="Banner">
        {% else %}
            <img src="{{ url_for('static', filename='images/img3.jpg') }}" class="hero-image-bg" alt="Default Banner">
        {% endif %}

        <div class="hero-content">
            <h1>{{ content.about_hero_title or 'About Padre Garcia Polytechnic College' }}</h1>
            <p>{{ content.about_hero_subtitle or 'Discover our commitment to excellence in education and community development.' }}</p>
        </div>
    </section>

{% endif %}

<section class="section-container about-section">
  <div class="about-container">
    <div class="about-sidebar reveal-on-scroll">
      <div class="box-title">{{ content.about_identity_title or 'Institutional Identity' }}</div>
      <div class="image-box">
        {% if content.about_identity_image %}
          <img src="{{ url_for('static', filename='images/uploads/' + content.about_identity_image) }}" alt="Identity Image">
        {% else %}
          <img src="{{ url_for('static', filename='images/about.jpg') }}" alt="Campus">
        {% endif %}
      </div>
    </div>
    <div class="about-content reveal-on-scroll">
      <h1 class="slogan-title text-primary font-bold italic mb-6">
          "{{ content.about_slogan or 'TAGA-PGPC AKO: MATALINO, DISIPLINADO, MABUTING TAO, IPINAGMAMALAKI KO!' }}"
      </h1>
      
      <h2 class="heading">Vision</h2>
      <p>{{ content.about_vision_text or 'PGPC is a premier local higher learning institution...' }}</p>
      
      <h2 class="heading">Mission</h2>
      <p>{{ content.about_mission_text or 'As a higher learning institution in Region IV...' }}</p>
      
      <h2 class="heading">Core Values</h2>
      <ul class="space-y-3 font-medium">
        {% if content.about_core_values %}
            {% for value in content.about_core_values.split('\n') %}
                {% if value.strip() %}
                <li class="flex items-center gap-3">
                    <i class="ri-checkbox-circle-fill text-primary text-xl"></i> {{ value.strip() }}
                </li>
                {% endif %}
            {% endfor %}
        {% else %}
            <!-- Fallback if empty -->
            <li class="flex items-center gap-3"><i class="ri-checkbox-circle-fill text-primary text-xl"></i> Commitment to Excellence</li>
        {% endif %}
      </ul>
    </div>
  </div>
</section>

<!-- --- Meet People Section --- -->
<section class="meet-people-section section-container reveal-on-scroll">
    <div class="meet-people-container">
        <div class="meet-people-top-row">
            <div class="meet-people-text">
                <!-- Dynamic Title and Text -->
                <h2>{{ content.community_title or 'Meet Our Community' }}</h2>
                <p>{{ content.community_text or 'At Padre Garcia Polytechnic College...' }}</p>
            </div>
            <div class="meet-people-image-large">
                <!-- Dynamic Community Image with fallback -->
                {% if content.community_image %}
                    <img src="{{ url_for('static', filename='images/uploads/' + content.community_image) }}" alt="Community">
                {% else %}
                    <img src="{{ url_for('static', filename='images/meetpeople.jpg') }}" alt="Community">
                {% endif %}
            </div>
        </div>
        <div class="meet-people-bottom-row">
            <div class="single-featured-person">
                <div class="person-image-container">
                    <!-- Dynamic President Image with fallback -->
                    {% if content.president_image %}
                        <img src="{{ url_for('static', filename='images/uploads/' + content.president_image) }}" alt="{{ content.president_name }}">
                    {% else %}
                        <img src="{{ url_for('static', filename='images/nino.jpg') }}" alt="President">
                    {% endif %}
                </div>
                <div class="person-details-container">
                    <!-- Dynamic President Details -->
                    <h2 class="person-name">{{ content.president_name or 'Dr. Niño Javinal Viñas' }}</h2>
                    <p class="person-role">{{ content.president_role or 'College President' }}</p>
                    <p class="person-description">
                        {{ content.president_desc or 'The President of Padre Garcia Polytechnic College...' }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End of Meet People Section -->

<!-- --- Meet Our Staff Section --- -->
<section class="meet-our-staff-section section-container reveal-on-scroll">
    <div class="meet-our-staff-container">
        {% set category_titles = {
            'leadership': 'Leadership & Deans',
            'faculty': 'Faculty & Program Heads',
            'support': 'Administrative & Support Staff'
        } %}

        {% for category, members in faculty_data.items() %}
            {% if members %}
            <div class="staff-category" id="{{ category }}-category">
                <div class="staff-header-container">
                    <div class="staff-header-titles">
                        <h2 class="staff-section-main-title">{{ category_titles.get(category, category|title) }}</h2>
                    </div>
                </div>
                <div class="staff-carousel-content-wrapper">
                    <div class="staff-grid-wrapper">
                        <div class="staff-grid">
                            {% for member in members %}
                            <div class="staff-member-card">
                                <img src="{{ url_for('static', filename='images/uploads/' + member.image_filename) if member.image_filename else url_for('static', filename='images/default_avatar.png') }}" alt="{{ member.name }}">
                                <h3 class="staff-member-name">{{ member.name }}</h3>
                                <p class="staff-member-role">{{ member.role }}</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                     <button class="staff-nav-arrow prev" aria-label="Previous staff"><i class='fas fa-angle-left'></i></button>
                     <button class="staff-nav-arrow next" aria-label="Next staff"><i class='fas fa-angle-right'></i></button>
                </div>
            </div>
            {% endif %}
        {% endfor %}
    </div>
</section>
<!-- End of Meet Our Staff Section -->


<section class="location-section section-container reveal-on-scroll">
    <div class="location-container">
        <h2 class="heading">Our Location</h2>
        <p class="section-subtitle" style="margin-top: -1.5rem; margin-bottom: 2.5rem;">
            Visit our campus. We are located in the heart of Padre Garcia, Batangas.
        </p>
        <div class="map-container">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3545.459040105033!2d121.2656064588598!3d13.882479556840263!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd3f0024d47b1b%3A0x111daf1b2a29e55e!2sPadre%20Garcia%20Polytechnic%20College!5e1!3m2!1sen!2sph!4v1747292232960!5m2!1sen!2sph"
                allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                title="Padre Garcia Polytechnic College Location Map">
            </iframe>
        </div>
    </div>
</section>


<button class="go-top-btn" id="goTopBtn" title="Go to top">
  <i class="ri-arrow-up-line"></i>
</button>

<footer class="footer">
    <!-- Dynamic Logo -->
    <img src="{{ url_for('static', filename='images/uploads/' + global_content.footer_logo_image) if global_content.footer_logo_image else url_for('static', filename='logopgpc.png') }}" 
         alt="Padre Garcia Polytechnic College logo" class="footer-logo" />
    
    <!-- Dynamic Title & Slogan -->
    <h1 class="footer-title">{{ global_content.footer_title or 'Padre Garcia Polytechnic College' }}</h1>
    <h2 class="footer-subtitle">{{ global_content.footer_subtitle or 'THE FUTURE BEGINS HERE.' }}</h2>
    
    <!-- Dynamic Connect Text & Socials -->
    <p class="footer-connect">{{ global_content.footer_connect_text or 'Connect with us' }}</p>
    <div class="footer-socials">
        {% if global_socials %}
            {% for link in global_socials %}
                <a href="{{ link.url }}" target="_blank" rel="noopener noreferrer" aria-label="{{ link.platform_name }}">
                    <i class="{{ link.icon_class }}"></i>
                </a>
            {% endfor %}
        {% else %}
            <!-- Fallback for old static link if no dynamic links exist -->
            {% if global_content.footer_facebook_link %}
                <a href="{{ global_content.footer_facebook_link }}" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            {% endif %}
        {% endif %}
    </div>

    <div class="footer-divider"></div>
    
    <!-- Dynamic Links & Contact Info -->
    <div class="footer-bottom">
      <p>
          <a href="{{ url_for('views.about') }}">About</a> | 
          <a href="{{ url_for('views.contact_page') }}">Contact us</a> | 
          <a href="{{ url_for('views.home') }}#programs">Programs</a> | 
          <a href="{{ url_for('views.home') }}">Admission</a> | 
          <a href="https://maps.app.goo.gl/od3hUBTfTZ1uNNvn7" target="_blank" rel="noopener noreferrer">{{ global_content.contact_address }}</a> | 
          <a href="tel:{{ global_content.contact_phone }}">{{ global_content.contact_phone }}</a>
      </p>
      <p>© {{ current_year if current_year else '2025' }}. All Rights Reserved {{ global_content.footer_title }} | <a href="https://www.padregarcia.gov.ph/home" target="_blank" rel="noopener noreferrer">Padre Garcia PH</a></p>
    </div>
</footer>

<!-- Staff Member Modal HTML -->
<div class="staff-modal" id="staffMemberModal" role="dialog" aria-modal="true" aria-labelledby="modalStaffName">
    <div class="staff-modal-content">
        <button class="staff-modal-close" aria-label="Close modal">×</button>
        <img src="" alt="Staff Member" id="modalStaffImage">
        <h2 id="modalStaffName"></h2>
        <p id="modalStaffRole"></p>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function () {
  // Go Top Button
  const goTopBtn = document.getElementById('goTopBtn');
  if (goTopBtn) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        goTopBtn.style.display = "flex";
      } else {
        goTopBtn.style.display = "none";
      }
    });
    goTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  }

  // Mobile Menu Toggle
  const menuToggle = document.querySelector('.menu-toggle');
  const navigation = document.getElementById('main-navigation');
  if (menuToggle && navigation) {
      menuToggle.addEventListener('click', function() {
          navigation.classList.toggle('active');
          menuToggle.classList.toggle('active');
          const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
          menuToggle.setAttribute('aria-expanded', !isExpanded);
      });
  }

  // --- Staff Carousel/Slider Logic (Unchanged from original) ---
  function initializeStaffSlider(staffCategoryElement) {
    const carouselContentWrapper = staffCategoryElement.querySelector('.staff-carousel-content-wrapper');
    if (!carouselContentWrapper) return;

    const prevButton = carouselContentWrapper.querySelector('.staff-nav-arrow.prev');
    const nextButton = carouselContentWrapper.querySelector('.staff-nav-arrow.next');
    const staffGrid = carouselContentWrapper.querySelector('.staff-grid');
    const staffGridWrapper = carouselContentWrapper.querySelector('.staff-grid-wrapper');
    const isLeadershipCategory = staffCategoryElement.id === 'leadership-category';
    const DESKTOP_BREAKPOINT = 992;
    let autoSlideInterval = null;
    const AUTO_SLIDE_DELAY = 4000;
    let touchStartX = 0, touchStartY = 0, touchEndX = 0, isSwiping = false;
    const swipeThreshold = 50;

    if (staffGrid && staffGridWrapper && prevButton && nextButton) {
        const cards = Array.from(staffGrid.querySelectorAll('.staff-member-card'));
        if (cards.length > 0) {
            let currentIndex = 0, cardWidthIncludingGap, visibleCardsCount, maxIndex, totalCardsWidth;
            function calculateMetrics() {
                if (cards.length === 0) return;
                const cardOuterWidth = cards[0].offsetWidth;
                const gapStyle = getComputedStyle(staffGrid).gap;
                const gap = gapStyle && gapStyle !== 'normal' ? parseFloat(gapStyle) : 0;
                cardWidthIncludingGap = cardOuterWidth + gap;
                const wrapperWidth = staffGridWrapper.offsetWidth;
                visibleCardsCount = cardWidthIncludingGap > 0 ? Math.max(1, Math.floor((wrapperWidth + gap) / cardWidthIncludingGap)) : cards.length;
                maxIndex = Math.max(0, cards.length - visibleCardsCount);
                totalCardsWidth = cards.reduce((acc, card) => acc + card.offsetWidth, 0) + (cards.length > 0 ? (cards.length - 1) * gap : 0);
            }
            function stopAutoSlide() { clearInterval(autoSlideInterval); autoSlideInterval = null; }
            function updateCarouselAppearanceAndBehavior() {
                calculateMetrics();
                const wrapperWidth = staffGridWrapper.offsetWidth;
                const allCardsFit = totalCardsWidth <= wrapperWidth;
                const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                if (isLeadershipCategory && allCardsFit && isDesktop) {
                    staffGrid.style.justifyContent = 'center';
                    staffGrid.style.transform = 'translateX(0px)';
                    prevButton.style.display = 'none';
                    nextButton.style.display = 'none';
                    currentIndex = 0;
                    stopAutoSlide();
                } else {
                    staffGrid.style.justifyContent = 'flex-start';
                    const offset = cardWidthIncludingGap > 0 ? -currentIndex * cardWidthIncludingGap : 0;
                    staffGrid.style.transform = `translateX(${offset}px)`;
                    const canScrollAtAll = cards.length > visibleCardsCount;
                    prevButton.style.display = canScrollAtAll ? 'flex' : 'none';
                    nextButton.style.display = canScrollAtAll ? 'flex' : 'none';
                    prevButton.disabled = !canScrollAtAll;
                    nextButton.disabled = !canScrollAtAll;
                }
            }
            function slideToIndex(newIndex, isAuto = false) {
                calculateMetrics();
                const wrapperWidth = staffGridWrapper.offsetWidth;
                const allCardsFit = totalCardsWidth <= wrapperWidth;
                const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                if (isLeadershipCategory && allCardsFit && isDesktop) { updateCarouselAppearanceAndBehavior(); return; }
                if (cards.length > visibleCardsCount) {
                    if (isAuto) {
                        currentIndex = (newIndex >= cards.length) ? 0 : newIndex;
                        if (currentIndex > maxIndex && cards.length > visibleCardsCount) { currentIndex = 0; }
                    } else {
                        if (newIndex >= cards.length) { currentIndex = 0; }
                        else if (newIndex < 0) { currentIndex = maxIndex; }
                        else { currentIndex = Math.min(newIndex, maxIndex); }
                        if (currentIndex < 0) currentIndex = 0;
                    }
                } else { currentIndex = 0; }
                updateCarouselAppearanceAndBehavior();
            }
            function startAutoSlide() {
                stopAutoSlide(); calculateMetrics();
                const wrapperWidth = staffGridWrapper.offsetWidth;
                const allCardsFit = totalCardsWidth <= wrapperWidth;
                const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                if (isLeadershipCategory && allCardsFit && isDesktop) { return; }
                if (cards.length > visibleCardsCount) { autoSlideInterval = setInterval(() => { slideToIndex(currentIndex + 1, true); }, AUTO_SLIDE_DELAY); }
            }
            function resetAndStartAutoSlide() { stopAutoSlide(); startAutoSlide(); }
            nextButton.addEventListener('click', () => { slideToIndex(currentIndex + 1); resetAndStartAutoSlide(); });
            prevButton.addEventListener('click', () => { slideToIndex(currentIndex - 1); resetAndStartAutoSlide(); });
            function handleTouchStart(event) {
                if (!event.touches || event.touches.length === 0) return;
                calculateMetrics(); const wrapperWidth = staffGridWrapper.offsetWidth;
                const allCardsFit = totalCardsWidth <= wrapperWidth; const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                if (isLeadershipCategory && allCardsFit && isDesktop) { isSwiping = false; return; }
                touchStartX = event.touches[0].clientX; touchStartY = event.touches[0].clientY;
                isSwiping = true; stopAutoSlide(); staffGrid.style.transition = 'none';
            }
            function handleTouchMove(event) {
                if (!isSwiping || !event.touches || event.touches.length === 0) return;
                const touchCurrentX = event.touches[0].clientX; const touchCurrentY = event.touches[0].clientY;
                if (typeof touchStartX === 'undefined' || typeof touchStartY === 'undefined') return;
                const deltaX = touchCurrentX - touchStartX; const deltaY = touchCurrentY - touchStartY;
                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 10) { event.preventDefault(); }
            }
            function handleTouchEnd(event) {
                if (!isSwiping) return;
                touchEndX = event.changedTouches[0].clientX; const swipeDistance = touchEndX - touchStartX;
                isSwiping = false; staffGrid.style.transition = 'transform 0.5s ease-in-out';
                calculateMetrics(); const wrapperWidth = staffGridWrapper.offsetWidth; const allCardsFit = totalCardsWidth <= wrapperWidth;
                const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT; if (isLeadershipCategory && allCardsFit && isDesktop) { resetAndStartAutoSlide(); return; }
                if (Math.abs(swipeDistance) > swipeThreshold) {
                    if (cards.length > visibleCardsCount) {
                        let targetIndex = currentIndex;
                        if (swipeDistance < 0) { targetIndex++; if (targetIndex > maxIndex) targetIndex = 0; }
                        else { targetIndex--; if (targetIndex < 0) targetIndex = maxIndex; }
                        slideToIndex(targetIndex);
                    } else { slideToIndex(currentIndex); }
                } else { slideToIndex(currentIndex); }
                resetAndStartAutoSlide();
            }
            const addSwipeListeners = () => { if (staffGridWrapper && staffGridWrapper.dataset.swipeListeners !== 'true') { staffGridWrapper.addEventListener('touchstart', handleTouchStart, { passive: true }); staffGridWrapper.addEventListener('touchmove', handleTouchMove, { passive: false }); staffGridWrapper.addEventListener('touchend', handleTouchEnd); staffGridWrapper.dataset.swipeListeners = 'true'; } };
            const removeSwipeListeners = () => { if (staffGridWrapper && staffGridWrapper.dataset.swipeListeners === 'true') { staffGridWrapper.removeEventListener('touchstart', handleTouchStart); staffGridWrapper.removeEventListener('touchmove', handleTouchMove); staffGridWrapper.removeEventListener('touchend', handleTouchEnd); staffGridWrapper.dataset.swipeListeners = 'false'; } };
            function manageSwipeListeners() {
                calculateMetrics(); const wrapperWidth = staffGridWrapper.offsetWidth; const allCardsFit = totalCardsWidth <= wrapperWidth; const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                if (isLeadershipCategory && allCardsFit && isDesktop) { removeSwipeListeners(); } else if (window.innerWidth <= 768) { addSwipeListeners(); } else { removeSwipeListeners(); }
            }
            updateCarouselAppearanceAndBehavior(); startAutoSlide(); manageSwipeListeners();
            [carouselContentWrapper, prevButton, nextButton].forEach(element => {
                if (element) {
                    element.addEventListener('mouseenter', stopAutoSlide);
                    element.addEventListener('mouseleave', () => {
                        calculateMetrics(); const wrapperWidth = staffGridWrapper.offsetWidth; const allCardsFit = totalCardsWidth <= wrapperWidth; const isDesktop = window.innerWidth >= DESKTOP_BREAKPOINT;
                        if (!(isLeadershipCategory && allCardsFit && isDesktop)) { startAutoSlide(); }
                    });
                }
            });
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    calculateMetrics(); if (currentIndex > maxIndex && maxIndex >=0) { currentIndex = maxIndex; } else if (currentIndex < 0) { currentIndex = 0; }
                    updateCarouselAppearanceAndBehavior(); resetAndStartAutoSlide(); manageSwipeListeners();
                }, 250);
            });
        } else {
            if(prevButton) { prevButton.style.display = 'none'; prevButton.disabled = true; }
            if(nextButton) { nextButton.style.display = 'none'; nextButton.disabled = true; }
        }
    }
  }
  document.querySelectorAll('.staff-category').forEach(category => initializeStaffSlider(category));

  // --- Staff Member Modal Functionality (Unchanged) ---
  const staffModal = document.getElementById('staffMemberModal');
  if (staffModal) {
    const modalImage = document.getElementById('modalStaffImage');
    const modalName = document.getElementById('modalStaffName');
    const modalRole = document.getElementById('modalStaffRole');
    const closeModalButton = staffModal.querySelector('.staff-modal-close');
    const allStaffCards = document.querySelectorAll('.staff-member-card');
    allStaffCards.forEach(card => {
        card.setAttribute('role', 'button');
        card.setAttribute('tabindex', '0');
        card.addEventListener('click', function() {
            modalImage.src = this.querySelector('img').src;
            modalImage.alt = this.querySelector('.staff-member-name').textContent;
            modalName.textContent = this.querySelector('.staff-member-name').textContent;
            modalRole.textContent = this.querySelector('.staff-member-role').textContent;
            staffModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            if(closeModalButton) closeModalButton.focus();
        });
        card.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); } });
    });
    const closeModal = () => { staffModal.classList.remove('active'); document.body.style.overflow = ''; };
    if (closeModalButton) closeModalButton.addEventListener('click', closeModal);
    staffModal.addEventListener('click', e => { if (e.target === staffModal) closeModal(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape' && staffModal.classList.contains('active')) closeModal(); });
  }

  // --- Animate on Scroll Logic (from index.html) ---
  const observerOptions = {
      root: null,
      rootMargin: '0px 0px -50px 0px',
      threshold: 0.1
  };
  const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
          if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target);
          }
      });
  }, observerOptions);
  document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
});
</script>

{% endblock%}